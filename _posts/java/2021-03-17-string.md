---
title: "Java 문자열 연결 처리"
excerpt: "StringBuilder 및 StringBuffer에 대해 알아보자."
categories:
  - Java
tags:
  - Java
date: 2021-03-17
last_modified_at: 2021-03-17
---

## 1. String

문자열은 ``new`` 연산자를 통해 생성하면 Heap 영역에 새로운 객체가 생성된다.

* 리터럴을 통해 사용하면 Heap 영역의 String Pool에서 관리된다.
* String에서 저장되는 문자열은 ``private final char[]``의 형태이기 때문에 String 값은 바꿀수 없는 불변객체다.

### 1.1. 연산

String + String + String같은 문자열 연산은 어떻게 처리될까? Immutable 특성상 새로운 문자열을 더할 때마다 **새로운 인스턴스**를 생성한다.

* 두 문자열의 내용을 읽고 합쳐 새로운 메모리에 복사한다.

각각의 String 주솟값이 Stack에 쌓이고, GC가 호출되기 전까지 생성된 String 객체들은 Heap에 쌓이기 때문에 메모리 관리에 치명적이다.

<br>

## 2. StringBuilder & StringBuffer

StringBuilder 및 StringBuffer는 객체 내부에 가변적인 문자 배열을 가지고 있다. 즉, 문자열 연산이 발생하면 배열 내부 값을 수정하는 등 메모리에 직접 append한다. 변경된 문자열의 길이가 기존 배열의 길이보다 커지면, 더 큰 배열을 생성해 복사한다.

StringBuilder는 별도의 동기화 처리가 되어있지 않다. 반면 StringBuffer는 Thread-Safe하므로 멀티 스레드 환경에서 사용이 용이하다.

### 2.1. JDK 1.5

JDK 1.5 버전부터는 문자열 연산시 컴파일 단계에서 String 객체를 StringBuilder로 컴파일 되도록 변경했다. 따라서 간단한 문자열 연산의 경우 가독성이 좋은 +를 사용하는 것이 좋다.

그러나 + 연산자는 매번 StringBuilder 객체를 생성하기 때문에, 반복문 내부에서 문자열을 조합하는 경우 외부에서 StringBuilder를 생성해 쓰는 것이 좋다.

<br>

---

## References

* [Java 문자열 연결방법 비교](https://ryan-han.com/post/dev/stringconcat/)
