---
title:  "Github Actions CI/CD(2) - submodule ë³€ê²½ í›„ ë©”ì¸ í”„ë¡œì íŠ¸ ë°˜ì˜í•˜ê¸°" 
excerpt: "submoduleì—ì„œ ì½”ë“œ ë³€ê²½ì´ ìˆì„ ë•Œ ë©”ì¸ í”„ë¡œì íŠ¸ì— ë°˜ì˜í•˜ëŠ” ë°©ë²• "

categories:
  - Infra
tags:
  - [Infra, Springboot, Project]

date: 2023-02-02
last_modified_at: 2023-02-02

---

git submoduleì„ í†µí•´ yml íŒŒì¼ê³¼ ê°™ì€ ë…¸ì¶œë˜ë©´ ì•ˆ ë˜ëŠ” ì •ë³´ë“¤ì„ í•œêº¼ë²ˆì— ê´€ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.

ì´ì œë¶€í„´ ì„¤ì • ì •ë³´ë“¤ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•´ì•¼ í•  ì¼ì´ ìƒê¸´ë‹¤ë©´ submodule repoì— ê°€ì„œ ìˆ˜ì •í•˜ê³ , í•´ë‹¹ ìˆ˜ì • ì´ë ¥ì„ ë©”ì¸ í”„ë¡œì íŠ¸ì— ë°˜ì˜ë§Œ í•˜ë©´ ëœë‹¤.

ë©”ì¸ í”„ë¡œì íŠ¸ì— ë°˜ì˜í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•´ ë³´ì.

ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

1. submodule ì½”ë“œ ë³€ê²½
2. Main í”„ë¡œì íŠ¸ ë°˜ì˜ 
3. í•´ë‹¹ ì´ë ¥ Main í”„ë¡œì íŠ¸ì—ì„œ commit í›„ push 
4. copyPrivate ì‹¤í–‰ í›„, ë³µì‚¬í•œ í•´ë‹¹ ì´ë ¥ì€ gitignore ì²˜ë¦¬
5. Main í”„ë¡œì íŠ¸ runìœ¼ë¡œ í™•ì¸

### 1. submodule ì½”ë“œ ë³€ê²½
---

submodule repoì—ì„œ ìˆ˜ì •ì‚¬í•­ì´ ìˆë‹¤ê±°ë‚˜ ì¶”ê°€í•  ë‚´ìš©ì´ ìƒê¸°ë©´, ì•„ë˜ì˜ ì´ˆë¡ìƒ‰ ë°•ìŠ¤ ì¹¸ì„ ëˆŒëŸ¬ Githubì—ì„œ ìˆ˜ì •í•˜ê³ , í™”ë©´ ë§¨ ì•„ë˜ì˜ commit ë²„íŠ¼ìœ¼ë¡œ commit í•œë‹¤.

![image](https://user-images.githubusercontent.com/85394884/217045714-eeaa79b2-28c8-4514-aeb0-45b87fc25f70.png)

![image](https://user-images.githubusercontent.com/85394884/217045943-db2d0853-2310-4cbf-b923-8007f5ae780a.png)

<br>

### 2. Main í”„ë¡œì íŠ¸ì— ë°˜ì˜
---

ë‹¤ìŒìœ¼ë¡œ, ë©”ì¸ í”„ë¡œì íŠ¸ì—ì„œ submoduleì„ ê°±ì‹ ì‹œì¼œì¤˜ì•¼ í•œë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

```shell
git submodule update --remote $ {submodule_repository_name}
```
![image](https://user-images.githubusercontent.com/85394884/217046217-5c3b8ce7-804d-4fb8-b7af-53e431444e4d.png)

âŒ ìœ„ì˜ ê³¼ì •ì´ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. âŒ

ê·¸ë ‡ë‹¤ë©´, ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ë¨¼ì € ì…ë ¥í•œ ë’¤ì— ìœ„ì˜ ê³¼ì •ì„ ì§„í–‰í•´ë³´ê¸¸ ë°”ë€ë‹¤.

```shell
git submodule update --init
```

[Git submodule ì‚¬ìš©í•˜ê¸°](https://pinedance.github.io/blog/2019/05/28/Git-Submodule) ë¥¼ ì°¸ê³ í•˜ì.

<br>

### 3. copyPrivate ì‹¤í–‰ í›„, ë³µì‚¬í•œ í•´ë‹¹ ì´ë ¥ì€ gitignore ì²˜ë¦¬

submodule ì²˜ìŒ ì ìš©ì‹œì¼°ì„ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë³€ê²½ì‚¬í•­ì´ Main í”„ë¡œì íŠ¸ì— ë°˜ì˜ëœ ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì•„ë‹Œ ìƒí™©ì´ë‹¤.

`copyPrivate` task ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì‹¤ì œë¡œ ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ê²Œë” í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/85394884/216500808-fe16604d-3512-4e18-8be9-3a9ada3645c9.png)

`copyPrivate` task ì‹¤í–‰ì„ í•˜ê³  ë‚˜ë©´, ë‹¤ìŒê³¼ ê°™ì´ ì‹¤ì œë¡œ submoduleì˜ ë³€ê²½ì‚¬í•­ì´ ì ìš©ë˜ì–´ Main í”„ë¡œì íŠ¸ì—ì„œ ë°”ë¼ë³´ëŠ” submoduleë„ ìµœê·¼ì— ë³€ê²½í•œ ì´ë ¥ìœ¼ë¡œ ë°”ë€ë‹¤.

![image](https://user-images.githubusercontent.com/85394884/216500937-be717bd5-3d50-453b-a2d4-fd27ea2bc9d9.png)

<br>

### 4. í•´ë‹¹ ì´ë ¥ Main í”„ë¡œì íŠ¸ì—ì„œ commití›„ push
---

submoduleì„ Main í”„ë¡œì íŠ¸ì— ë³µì‚¬í•˜ì—¬ ê°±ì‹ ì„ ë¨¼ì € í–ˆìœ¼ë©´, í•´ë‹¹ ë³€ê²½ì‚¬í•­ì„ ì§„ì§œ push í•´ì£¼ì–´ì•¼ í•œë‹¤.

í˜„ì¬ ìƒíƒœëŠ” localì—ì„  ë°˜ì˜ë˜ì—ˆì§€ë§Œ, mainì— mergeëœ ìƒíƒœëŠ” ì•„ë‹ˆë‹¤.

 `git status` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´, ìƒˆë¡œ commitëœ submoduleì´ ë³´ì¼ ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/85394884/217046413-27b77ba4-4c98-4c01-801b-8f98b62ffde5.png)

í•´ë‹¹ ì´ë ¥ì„ commití•˜ê³ , push í•´ì¤€ë‹¤. 

ì´ì œ ì§„ì§œ submoduleì—ì„œì˜ ë³€ê²½ì‚¬í•­ì´ ì ìš©ë˜ì–´ì„œ ë°°í¬ë  ê²ƒì´ë‹¤.

ğŸš¨ ë¬¼ë¡ , 3ë²ˆ ê³¼ì •ì—ì„œ ë³µì‚¬í•œ `application-dev.yml` íŒŒì¼ì€ gitignore ì²˜ë¦¬í•´ì£¼ì–´ commit ì´ë ¥ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤. ğŸš¨

![image](https://user-images.githubusercontent.com/85394884/217046877-3edac121-5d63-431b-9320-c288ab597112.png)

mergeì™€ ë°°í¬ì— ì„±ê³µí•˜ë©´ ì´ë ‡ê²Œ ë³€ê²½ì‚¬í•­ì´ ì¼ì¹˜ëœ ìƒíƒœë¡œ ë°”ë€ë‹¤.

![image](https://user-images.githubusercontent.com/85394884/217048021-aaea7912-e93b-48ab-a47f-9a178c3be467.png)

![image](https://user-images.githubusercontent.com/85394884/217047855-4016e4f8-7b1d-4129-b30e-32a2d989c07d.png)

<br>

### 5. Main í”„ë¡œì íŠ¸ runìœ¼ë¡œ í™•ì¸
---

ì´ì œ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œë˜ëŠ”ì§€ í™•ì¸ë§Œ í•˜ë©´ ëœë‹¤.

![image](https://user-images.githubusercontent.com/85394884/216507897-d85dd060-ef9b-4b27-a97e-4ff5557d95df.png)

<br>

### 6. í˜‘ì—… ì‹œ ì£¼ì˜í•  ì 

ğŸš¨ ì¶”ê°€ì ìœ¼ë¡œ, í˜¼ì ì‘ì—…ì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ íŒ€ ì‘ì—…ì„ í•˜ëŠ” ê²½ìš°ì— ëˆ„êµ°ê°€ ìœ„ì˜ 1~5 ë²ˆ ê³¼ì •ì„ ê±°ì³ì„œ ì„±ê³µí–ˆë‹¤ë©´, ë‹¤ë¥¸ ì‚¬ëŒë“¤ë„ í˜„ì¬ ì‘ì—…í•˜ëŠ” branchì—ì„œ 2,3 ì‘ì—…ì„ ì¦‰ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œí•œë‹¤.

ê·¸ë¦¬ê³ , ë³¸ì¸ì˜ ì‘ì—…ì„ ë§ˆë¬´ë¦¬í•˜ê³ , 4,5 ê³¼ì •ì„ ê±°ì¹˜ë©´ ë¬¸ì œê°€ ë˜ëŠ” ì¼ì€ ì—†ì„ ê²ƒì´ë‹¤. ğŸš¨

<br>

## References

* [git ê³µì‹ë¬¸ì„œ](https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88)
* [git submoduleë¡œ ì¤‘ìš”í•œ ì •ë³´ ê´€ë¦¬í•˜ê¸°](https://tecoble.techcourse.co.kr/post/2021-07-31-git-submodule/)
* [[Git] Git Submoduleì— ëŒ€í•˜ì—¬](https://leveloper.tistory.com/176)
* [Git submodule ì‚¬ìš©í•˜ê¸°](https://pinedance.github.io/blog/2019/05/28/Git-Submodule)