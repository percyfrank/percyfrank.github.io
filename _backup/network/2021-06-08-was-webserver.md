---
title: "Web Server vs WAS"
excerpt: "확장성 및 안정성을 고려하여 두 가지를 함께 사용하자."
categories:
  - Network
tags:
  - Network
date: 2021-06-08
last_modified_at: 2021-06-08
---

## 1. 개요

![image](https://user-images.githubusercontent.com/56240505/122050353-5b3d0b00-ce1e-11eb-9f0c-5441d6d376ba.png)

과거의 웹 어플리케이션은 HTML, CSS, Image 등 정적으로 준비된 컨텐츠를 Web Server를 통해 클라이언트에게 제공했다. 그러나 웹의 보급으로 인해 클라이언트 요청에 맞게 개인화된 콘텐츠를 동적으로 생성해서 보여줄 필요성이 증대되었다.

![image](https://user-images.githubusercontent.com/56240505/122050412-65f7a000-ce1e-11eb-9dd0-2572b5d8b368.png)

Web Server는 연산이 필요없는 정적인 컨텐츠를 주로 처리하고, DB 조회나 다양한 로직 처리를 요구하는 연산이 필요한 경우 WAS에게 요청 객체를 넘긴다. WAS는 요청에 대해 로직대로 연산을 수행한 뒤 응답 결과(동적인 컨텐츠)를 생성해 Web Server(->클라이언트)로 반환한다

정리하자면 Web Server는 HTTP 프로토콜 레벨의 서비스를 제공하고, WAS는 더 강력한 동적 웹 서비스를 제공한다.

1. 사용자가 URL(또는 IP)을 통해 WEB 서버를 호출하고 요청사항을 객체(request)에 담아 전송한다.
2. WEB 서버는 요청 객체(request)를 받아서 바로 처리하거나 어플리케이션 서버(WAS)로 객체를 전달한다.
3. WAS 서버는 요청에 대한 내용과 요청 객체(request)를 받아 적절히 처리(필요시 DB 작업 진행)한다.
4. WAS 서버는 처리 후 결과를 응답 객체(response)에 담아 WEB 서버로 회신한다.
5. WEB 서버는 응답 객체(response)를 다시 사용자에게 회신한다.
6. 사용자의 브라우저는 WEB 서버가 보내준 코드를 해석해 화면을 구성하여 출력한다.

<br>

## 2. Web Server

클라이언트는 미리 정해진 HTTP 규격에 맞는 요청을 보낸다. 이것을 해석하고 클라이언트가 원하는 데이터를 보내주어야 한다. 웹 서버는 HTTP 요청을 해석하고, 그에 맞는 데이터 형식으로 응답을 보내주는 역할을 수행한다.

웹 서버란 웹 브라우저(클라이언트)로부터 HTTP 요청을 받아 HTML 문서와 같은 정적 컨텐츠를 제공하는 프로그램이다.

### 2.1. 정적 컨텐츠

정적 컨텐츠란 요청 인자 값에 상관없이 달라지지 않는 컨텐츠를 의미한다. HTML, CSS, IMAGE 등 어느 사용자 요청이든 항상 동일한 컨텐츠들이 대표적이다.

### 2.2. 기능

클라이언트로부터 HTTP 요청을 받아 처리할 수 있다. 이 때, ``GET /path/index.html``과 같은 정적 컨텐츠 요청인 경우 정적 컨텐츠를 제공하며, ``GET /server/content?name=Alice``와 같이 동적 컨텐츠 요청시 WAS로 전달하여 WAS가 처리한 결과를 클라이언트에게 전달한다.

<br>

## 3. WAS(Web Application Server)

인터넷 상에서 HTTP를 통해 사용자 컴퓨터나 장치에 애플리케이션을 수행해 주는 미들웨어이다. 웹 애플리케이션 서버는 동적 서버 콘텐츠를 수행하는 것으로 일반적인 웹 서버와 구별이 되며, 주로 데이터베이스 서버와 같이 수행이 된다. 영어권에서는 Application Server로 불린다.

DB 조회나 다양한 로직 처리를 요구하는 동적인 컨텐츠를 제공하기 위해 만들어진 프로그램이다.

### 3.1. 동적 컨텐츠

요청 인자에 따라 바뀔 수 있는 컨텐츠를 의미한다. 즉 클라이언트 요청별로 서로 다른 내용 및 형태를 지니고 있다.

### 3.2. 기능

클라이언트로부터 HTTP 요청을 받을 수 있다. 대부분의 WAS는 Web Server를 내장하고 있다. 요청에 맞게 정적 컨텐츠를 제공할 수 있으며, DB 조회나 다양한 로직 처리(JSP, Servlet)를 통해 동적 컨텐츠를 제공할 수 있다.

<br>

## 4. WAS 앞단에 Web Server를?

WAS가 Web Server의 기능을 겸할 수 있지만, Web Server를 함께 사용할 때의 장점이 존재한다. 확장성 및 안정성 측면에서 유리하다.

### 4.1. 책임 분할

정적인 컨텐츠는 Web Server가, 동적인 컨텐츠는 WAS가 담당하게 하면 서버 부하를 방지할 수 있다.

### 4.2. 로드 밸런싱

앞단에는 1대의 Web Server를, 뒷단에는 여러 개의 WAS를 두는 경우를 가정해보자. WAS가 처리해야 할 요청을 Web Server가 여러 WAS가 처리할 수 있도록 분배할 수 있다.

### 4.3. Health Check

Web Server는 WAS가 정상적으로 동작하는지 주기적으로 HTTP 요청을 보내 상태를 확인할 수 있다. 예를 들어, 특정 URL 요청에 대해 200 응답이 오는지 등을 확인하는 것이다.

* Interval : Health Check를 통해 서버 상태를 확인하는 요청을 날리는 주기다.
* Fails : 인자값에 해당하는 횟수만큼 연속으로 실패하면 서버를 비정상으로 인지한다.
  * 이상이 생기면 WAS에 대한 연결을 자동으로 차단하도록 설정할 수 있다.
  * 즉, 사용자는 서버에 이상함을 느끼지 못하도록 한다.
* Passes : 서버가 다시 복구되어 요청이 인자값에 해당하는 만큼 연속으로 성공하면 정상으로 인지한다.

### 4.4. 보안

WAS는 DB 접근 권한 및 관련 로직이 위치하는데, Web Server를 앞단에 둠으로써 WAS를 외부에 노출시키지 않을 수 있다.

<br>

---

## References

* [[10분 테코톡] 👳‍♂️ 알리의 Web Server vs WAS](https://www.youtube.com/watch?v=mcnJcjbfjrs)
