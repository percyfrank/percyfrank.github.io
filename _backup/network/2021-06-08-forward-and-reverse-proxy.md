---
title: "Forward Proxy vs Reverse Proxy vs Load Balancer"
excerpt: "복수의 서버로 클라이언 요청을 처리하는 방식을 분산 처리라고 한다."
categories:
  - Network
tags:
  - Network
date: 2021-06-08
last_modified_at: 2021-06-08
---

## 1. Load Balancer

서버에 대한 클라이언트 요청이 증가할 때, 여러 대응 방안이 존재한다. 가장 쉬운 방법은 서버의 하드웨어 성능을 고성능으로 업그레이드하는 Scale-Up 방식이 있다. 그러나 아무리 고성능 스펙이더라도 다량의 클라이언트 요청을 서버 한 대로 처리하는데는 한계가 있다.

복수의 서버로 클라이언 요청을 처리하는 방식을 분산 처리라고 한다. 여러 대의 웹 서버를 두고 한 대가 담당하는 요청의 수를 줄이는 방식이 대표적이다.

* 로드 밸런싱이란 해야할 작업을 나누어서 서버의 부하를 분산시키는 것.
* 로브 밸런서란 여러 대의 서버가 분산처리 할 수 있도록 요청을 나누어주는 서비스.

### 1.1. 판단 근거

로드 밸런서가 요청을 분배할 때의 판단 근거는 여러 방식이 존재한다.

* 웹 서버의 부하 상태를 근거로 채택할 수 있다.
  * 시험 패킷 등을 통해 웹 서버의 응답 시간을 체크하여 부하를 판단한다.
* 미리 웹 서버의 능력을 설정한 뒤, 비율에 따라 분배할 수 있다.

### 1.2. 종류

L2, L3, L4, L7가 있다.

* L2, L3는 각각 맥 주소와 IP 주소를 바탕으로 로드 밸런싱한다.
* L4는 전송 계층에서 로드 밸런싱한다.
  * 특정 URL 요청을 담당하는 여러 대의 서버로 로드 밸런서가 요청을 나누어준다.
* L7는 응용 계층에서 로드 밸런싱한다.
  * 특정 URL 요청이 들어올 때, 세부 URL에 따라 담당 서버들로 요청을 나누어준다.
  * 예 : ``URL/category``, ``URL/tags`` 등.

<br>

## 2. Proxy Server

Proxy Server는 서버와 클라이언트 간의 중계 서버로서, 통신을 대리 수행하는 역할이다. 프록시는 웹 서버이면서 동시에 웹 클라이언트의 성격을 가진다.

### 2.1. Forward Proxy

```
Client <-> Proxy <-> Internet <-> Server
```

* Forward Proxy란 클라이언트 대신 서버에 요청을 보내주는 역할이다.
* 로컬 네트워크와 인터넷 사이 오가는 트래픽을 제어할 수 있다.
  * 유스케이스 : 학교 및 관공서에서 사용자들이 부적절한 컨텐츠 사이트에 접근하는 것을 Forward Proxy로 필터링걸 수 있다.
* 즉, Proxy가 클라이언트 가까이에 있다.

### 2.2. Reverse Proxy

```
Client <-> Internet <-> Proxy <-> Server
```

* Reverse Proxy는 서버 대신 클라이언트에 응답을 보내주는 역할이다.
* 네트워크에 가장 끝에 있는 웹 서버의 앞단에 위치해있어, 웹 서버를 향하는 모든 요청을 처리할 수 있다.
  * 웹 서버의 보안 기능을 추가할 수 있다.
  * 빠른 웹 서버 캐시를 느린 웹 서버 앞단에 위치시켜 성능을 개선할 수 있다.
* Proxy가 서버 가까이에 있다.

<br>

## 3. Proxy 배치

```
Client <-> Proxy <-> Internet <-> Server
```

* 인터넷 서비스 공급자(ISP) 접근 지점에 위치하여 속도를 개선할 수 있다.
  * 고속 접속 사용자를 위해 다운로드 속도를 개선한다.
  * 인터넷 대역폭 비용 절감을 위해 캐시 프락시를 이용하여 많이 찾는 요청을 캐싱한다.

```
Client <-Network1-> [Router] [Proxy] [Router] <-Network1-> Server
```

* 네트워크 교환 프록시는 Proxy가 네트워크 경로 중간에 위치한다.
* 캐시를 이용해서 인터넷 혼잡을 완화하고 트래픽을 감시한다.
  * 네트워크 사이의 인터넷 교환 지점에 놓일 수 있다.

<br>

## 4. 왜 Proxy를 사용할까?

1. 필터링
  * 허용하지 않는 컨텐츠에는 접근 제한을 거는 학교 및 관공서 등의 유스케이스가 있다.
2. 접근 제어
  * 많은 웹 서버들과 웹 리소스에 대한 단일한 접근 제어 전략을 구현하고 추적을 하기 위해 사용한다.
  * 특정 클라이언트만 접근할 수 있는 컨텐츠가 있다면, 허가된 클라이언트는 허가해주며 그 외는 비밀번호를 요청할 수 있다.
3. 캐싱
  * 프록시 캐시는 인기있는 요청을 캐싱해두고, 해당 요청이 온다면 서버까지 거치지 않고 프록시에서 응답한다.
  * 비용 절감이 가능하다.
4. 익명화
  * HTTP 메시지에서 신원을 식별할 수 있는 특성을 제겋마으로써, 개인 정보 보호 및 익명성 보장에 기여할 수 있다.
  * 클라이언트 요청을 프록시 요청인척 위장할 수 있고, 리버스 프록시의 경우 서버인척 응답하기 때문에 보안에 기여할 수 있다.
4. 로드 밸런싱
  * 서버가 요청을 나누어 가질 수 있도록 프록시에서 결정할 수 있다.

<br>

---

## References

* [[10분 테코톡] 🌟조앤의 Forward Proxy vs Reverse Proxy vs Load Balancer](https://www.youtube.com/watch?v=u4O4zHdiFhk)
