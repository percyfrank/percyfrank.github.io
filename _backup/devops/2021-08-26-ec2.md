---
title: "AWS EC2 관련 개념 정리"
excerpt: "VPC 및 IAM 등의 개념에 대해 알아보자."
categories:
  - DevOps
tags:
  - DevOps
date: 2021-08-26
last_modified_at: 2021-08-26
---

## 1. EC2

* Elastic Compute Cloud의 약자로서, AWS에서 제공하는 클라우드 컴퓨팅 서비스다.
* 확장 가능한 컴퓨팅 용량을 제공한다.

<br>

## 2. VPC

![image](https://user-images.githubusercontent.com/56240505/130916633-748bcf1b-62c4-4ce1-af6c-fe3f253321e4.png)

* Virtual Private Cloud의 약자로서, 사용자의 AWS 계정 전용 가상 네트워크다.
  * VPN(가상사설망) : 물리적으로 같은 네트워크에 위치해있지만 논리적으로 다른 네트워크인것 처럼 동작한다.
    * 가상의 논리적인 사설망이 없다면, 사내 네트워크에서 직원들간 네트워크를 분리할 때 인터넷을 재시공해야한다.
  * VPC가 없다면 EC2 인스턴스들이 서로 거미줄처럼 연결되고 인터넷과 연결되고, 시스템 복잡도가 상승한다.
    * 하나의 인스턴스만 추가되어도 모든 인스턴스를 수정해야하는 불편함이 생긴다.
* AWS를 통해 VPC별로 네트워크를 구성할 수 있고, 각각의 VPC에따라 다르게 네트워크 설정을 부여할 수 있다.
  * 각각의 VPC는 완전히 독립된 네트워크처럼 작동한다.
* 서브넷 : VPC 내 IP 주소 범위를 뜻한다.
  * VPC를 잘개 쪼개는 과정이다.
  * 서브넷을 나누는 이유는 더 많은 네트워크망을 만들기 위해서다.
    * 하나의 IP 네트워크 주소를 분할해 여러 개의 서로 연결된 지역 네트워크로 사용할 수 있도록 하는 방법이다.

<br>

## 3. IAM

![image](https://user-images.githubusercontent.com/56240505/130917149-5d4b4678-aff8-4ffa-8535-6f1a41a5c1a1.png)

* Identity and Access Management의 약자로서, AWS 리소스에 대한 액세스를 안전하게 제어할 수 있는 웹 서비스다.
* AWS의 모든 솔루션의 서비스 및 자원에 대해 개별적으로 권한을 부여할 수 있는 권한 관리 솔루션이다.
* 하나의 AWS 계정 안에서도 IAM 그룹과 사용자를 생성해 접근제어 및 권한을 세분화한다.
  * 누구는 DB 관련을 권한을, 누구는 S3 권한을, 누구는 이 모든 권한을 등.
  * 만약 단일 로그인 자격 증명(즉, root 계정으로 모든 권한을 퉁치는)을 사용한다면?
    * 해당 AWS 계정의 솔루션을 사용하는 모든 서비스 관리자들이 root 계정을 공유하게 된다.
    * 모든 서비스 관리자들에게 불필요한 권한이 오픈된다.
* 즉, IAM은 권한 분리 문제를 해결하기 위한 것이다.
* 보안 주체가 인증(Authentication)과 권한부여(Authorization)을 받아 리소스에 대한 요청을 승인하는 것이 IAM의 주요 작동 방식이다.

### 3.1. 관련 개념들

* IAM 정책 : 하나 이상의 AWS 리소스에 대한 어떤 작업을 수행할 수 있는지 허용 규칙을 JSON 형식으로 작성해 권한을 부여한다.
* IAM 사용자 : 루트 계정에 의해 만들어진 실제 사용자 단 한명을 의미한다.
* IAM 그룹 : 다수의 IAM 사용자를 모아놓은 개념이다.
  * IAM 사용자마다 매번 정책을 직접 연결해줘야 하는 번거로움과 관리 포인트를 줄이기 위함이다.
  * backend_developers라는 그룹에 S3와 Cloudwatch에 Read Only 정책을 연결한다면, 이 그룹에 속한 IAM 사용자들에게 자동으로 이 정책이 적용된다.

### 3.2. IAM Role

* AWS 서비스를 요청하기 위한 “권한 세트”를 정의하는 IAM 기능이다.
  * 권한이라 하면 정책(Policy)에 부여하는 권한과 같은 것을 의미한다.
* **역할의 큰 특징은 IAM 사용자나 IAM 그룹에는 연결되지 않는다는 것이다.**
  * 대신 **신뢰할 수 있는** IAM 사용자나 애플리케이션 또는 AWS 서비스(예: EC2 인스턴스)가 역할을 맡을 수 있다.
* IAM 역할은 특정 권한을 가진 계정에 생성할 수 있는 IAM 자격 증명이다.
  * IAM 역할을 사용하여 AWS 리소스에 대한 액세스 권한을 위임한다.
  * 신뢰할 수 있다는 말은 신분이 증명되었음을 의미한다.
    * IAM 사용자라면 로그인을 했거나 AWS CLI 또는 AWS SDK를 통한 Access Key/Secet Access Key로 인증(Authentication)된 상태다.
    * 혹은 EC2 같은 AWS 서비스 계정 안에서 실행되는 서비스다.
    * 즉, 신뢰할 수 있는 서비스만이 IAM Role(역할)을 Assume(맡을)수 있다.
* **역할과 사용자** 모두 AWS에서 자격 증명으로 할 수 있는 것과 할 수 없는 것을 결정하는 권한 정책을 포함하는 AWS 자격 증명이다.
  * 역할은 사용자와 유사하지만 한 사람과만 연관되지 않고 그 역할이 필요한 사람이면 누구든지 맡을 수 있도록 고안되었다.
  * 역할에는 그와 연관된 암호 또는 액세스 키와 같은 표준 장기 자격 증명이 없다.
  * 역할을 수임하면 역할 세션을 위한 임시 보안 자격 증명을 제공한다.
  * 역할을 사용하여 일반적으로 AWS 리소스에 액세스할 수 없는 사용자, 애플리케이션 또는 서비스에 액세스 권한을 위임이 가능하다.

<br>

## 4. 보안 그룹

* EC2 인스턴스에 대한 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽 역할이다.
* 인바운드 규칙은 인스턴스로 들어오는 트래픽을 제어하고, 아웃바운드 규칙은 인스턴스에서 나가는 트래픽을 제어한다.
* VPC에서 인스턴스를 시작할 때 최대 5개의 보안 그룹에 인스턴스를 할당할 수 있다.
* 보안 그룹은 서브넷 수준이 아니라 인스턴스 수준에서 작동하므로 VPC에 있는 서브넷의 각 인스턴스를 서로 다른 보안 그룹 세트에 할당이 가능하다.

<br>

---

## References

* AWS Docs
* [[AWS] 가장쉽게 VPC 개념잡기](https://medium.com/harrythegreat/aws-%EA%B0%80%EC%9E%A5%EC%89%BD%EA%B2%8C-vpc-%EA%B0%9C%EB%85%90%EC%9E%A1%EA%B8%B0-71eef95a7098)
* [[IAM] 0. IAM 이란?](https://claudecloud.tistory.com/2)
* [[매뉴얼][초보자를 위한 AWS 웹구축] 2. IAM 유저 및 MFA 생성하기](https://tech.cloud.nongshim.co.kr/2018/10/13/%EC%B4%88%EB%B3%B4%EC%9E%90%EB%A5%BC-%EC%9C%84%ED%95%9C-aws-%EC%9B%B9%EA%B5%AC%EC%B6%95-2-iam-%EC%9C%A0%EC%A0%80-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0/)
* [AWS IAM 역할(Role)은 정확히 무엇인가요? 어떻게 써야 할까요](https://jonnung.dev/posts/2021-01-28-aws-iam-role/)
