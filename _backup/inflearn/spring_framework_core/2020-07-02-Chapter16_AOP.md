---
title:  "[Spring Framework 핵심 기술] 16장 : AOP"
excerpt: "Inflearn 백기선님의 강의 및 Spring 공식 문서를 참고하여 정리한 필기입니다."
categories:
  - Spring & Spring Boot
tags:
  - Spring & Spring Boot
toc: true
toc_sticky: true
last_modified_at: 2020-07-10T08:21:00-05:00
---

> [실습 Repository](https://github.com/xlffm3/spring-learning-test/tree/inflearn-core)

## 1. AOP(Aspect-Oriented Programming)

![AOP](https://user-images.githubusercontent.com/56240505/80103754-60068600-85b0-11ea-9cd7-673db96e6c32.png)

*	OOP를 보완하는 수단으로서, 흩어진 관심사(Aspect)를 모듈화 할 수 있는 프로그래밍 기법이다.
* OOP 핵심 모듈 단위가 클래스라면, AOP는 관심사다.
* Spring IoC Container는 AOP에 의존하지 않지만, AOP는 미들웨어 솔루션을 제공함으로써 IoC Container를 보완한다.

### 1.1. 주요 개념

* Aspect : 여러 클래스들에 드러나는 관심사의 모듈.
* Joint Point : 메서드 수행 혹은 예외 핸들링과 같은 프로그램 실행 도중의 어느 한 부분.
  * Spring AOP에서 Joint Point는 메서드 수행을 의미한다.
  * 생성자가 호출되었을 때 혹은 필드에서 값을 가져왔을 때 등 Advice의 여러 합류 지점과 같은 Spec.  
* Advice : 특정 Joint Point에서 관심사에 의해 수행되어야 할 일, 행동.
  * around, before, after 등의 종류가 있다.
  * 많은 AOP 프레임워크는 Joint Point 부근에서 인터셉터 체이닝을 통해 Advice를 모델한다.
* Pointcut : Joint Point의 Subset으로서 특정 클래스의 특정 메서드가 호출될 때 Advice를 적용한다 등의 구체적인 정보.
* Target : Advice가 적용이 되는 대상(Class A, B, C 등).
* AOP Proxy : Advice 수행을 위해 프레임워크에 의해 생성된 객체.
  * CGLIB 혹은 JDK 다이내믹 프록시다.
* Weaving : 서로 다른 어플리케이션 타입 객체들의 관심사를 연결하여 **Advised Object**를 생성한다.
  * 컴파일 타임, 로드 타임, 런타임 등 다양한 때에 수행될 수 있다.
  * 프레임워크들은 대게 런타임을 선호한다.

<br>

## 2. AOP 적용 방법

* 컴파일 : Java 파일을 Class 파일로 변환할 때 바이트 코드가 조작이 된 파일을 생성한다.
* 로드 타임 : 순수하게 컴파일을 한 뒤, 특정 Class 파일을 로딩하는 시점에 Class 파일 정보를 변경하는 로드 타임 위빙을 통해 적용한다.
  * 바이트 코드의 변경은 없다.
* 런타임 : Bean을 생성할 때 해당 Bean의 Proxy Bean을 생성하여 Advice를 수행하는 AOP를 적용한다.
* 컴파일 및 로드 타임은 AspectJ를, 런타임에는 Spring AOP를 이용한다.
* 컴파일 및 로드 타임에서의 AOP 설정은 별도의 추가 설정을 요구한다.
* 각 적용 방법에 따라 특정 시점에서의 성능 저하가 유발될 수 있다.

<br>

## 3. Adivce의 종류

* Advice의 Pointcut은 다양한 종류가 존재한다.
  * Before, After returning, After throwing, After, Around 등.
* Around가 가장 강력하지만, Spring AOP는 주어진 행동을 수행할 수 있는 가장 약한 Advice 사용을 권고한다.
  * 가장 구체적인 Advice를 사용하는 것이 잠재적인 에러 없이 간단하게 모델을 개발할 수 있다.

<br>

## 4. Spring AOP의 능력 및 목적

* Spring AOP는 순수한 Java로 구현되었으며, 특별한 컴파일 과정을 필요로 하지 않는다.
  * 클래스 로더 계층을 조작할 필요가 없기에, 서블릿 컨테이너나 어플리케이션 서버에서 사용하기 좋다.
* 다른 AOP 프레임워크(AspectJ 등)와 다르게 필드 인터셉션은 구현되어 있지 않으며, 오로지 Joint Point에서의 메서드 수행만을 지원한다.
* 모든 AOP 기능을 제공하는 것이 목적이 아니라, Spring IoC와 연동하여 엔터프라이즈 어플리케이션에서 가장 흔한 문제에 대한 해결책을 제공하는 것이 목적이다.

<br>

---

## References

*	스프링 프레임워크 핵심 기술(백기선, Inflearn)
