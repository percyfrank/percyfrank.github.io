---
title: "Process vs Thread"
excerpt: "스레드는 경량화된 프로세스다."
categories:
  - Operating System
tags:
  - Operating System
date: 2021-06-08
last_modified_at: 2021-06-08
---

## 1. 용어 정리

* 실행 단위 : CPU Core에서 실행하는 하나의 단위로 프로세스와 스레드를 포괄하는 개념이다.
* 단일 프로세스 : 하나의 스레드만 가지고 있는 프로세스다.
* 동시성 : 짧은 전환으로 여러가지 일을 동시에 처리하는 것처럼 보이는 것이다.

<br>

## 2. Program과 Process

우리가 작성한 프로그램은 실행시키기 전에는 그저 코드 파일에 불과하다. 사용하기 위해서는 **실행이 되어서 사용할 수 있는 무언가**가 되어야 한다. 컴퓨터에서 프로그램을 실행시키면, 프로그램은 프로세스가 된다.

* 프로그램이 프로세스가 되면 프로세스가 필요로 하는 재료들이 메모리에 적재된다.
  * Code, Data, Heap, Stack 영역이 메모리 공간을 확보한다.
* 해당 프로세스에 대한 정보를 가진 PCB 블럭이 프로세스 생성시 함께 만들어진다.
  * PID, Process State, 준ㄴ비 및 대기 상태 구현을 위한 Queue 포인터 등.

### 2.1. Process 특징

한 프로세스가 실행되기 위해 CPU를 점유하고 있으면, 다른 프로세스는 실행 상태가 될 수 없다. 다수의 프로세스를 동시 실행하기 위해, 시분할하여 짧은 텀을 반복 및 전환함으로써 동시에 실행되는 것처럼 보이게 한다.

컨텍스트 스위칭이란 다수의 프로세스가 동시성을 구현하기 위해 준비 및 실행 등의 컨텍스트를 변경하는 것을 의미한다.

<br>

## 3. Process와 Thread

> 스레드는 경량화된 프로세스다.

하나의 프로세스 안에 다수의 스레드가 존재하면, 자원을 공유한다. 스레드는 프로세스 내부 Code, Data, Heap 영역을 공용 자원으로 사용한다. 오직 Stack만을 스레드 개별적으로 가지고 있다. 프로세스에 비해 컨텍스트 스위칭이 발생할 때, 부담이 적으며 캐싱 적중률이 높다.

<br>

## 4. Multi-Process와 Multi-Thread

멀티 프로세스와 멀티 스레드 모두 한 어플리케이션에 대한 처리 방식이다. 하나의 어플리케이션이 여러 일을 처리해야 할 때를 가정해보자.

1. 한 프로세스는 한 번에 하나의 작업을 처리할 수 있다.
  * 부모 프로세스는 ``fork()``를 통해 부모와 다른 메모리 영역을 가진 자식 프로세스를 생성해 여러 일을 처리할 수 있다.
2. 스레드는 한 프로세스 내에서 구분되어지는 실행 단위이다.
  * 멀티 프로세스의 경우 실행 단위가 프로세스이다.
  * 엄밀하게 말하면 해당 프로세스의 단일 스레드가 실행 단위인 셈이다.
  * 프로세스 내에 여러 스레드로 나뉘어 작업을 처리하면 멀티 스레드이다.
3. 멀티 프로세스의 특징은 다음과 같다.
  * 각 프로세스가 독립적이기 때문에, IPC로 통신한다.
  * 각 프로세스간 상호 영향이 적다.
  * 개별 메모리를 사용함으로써 자원이 많이 들고, 컨텍스트 스위칭 비용이 크다.
  * 동기화 작업은 필요없다.
4. 멀티 스레드의 특징은 다음과 같다.
  * 스레드끼리 긴밀하게 연결되어 있으며, 한 스레드가 전체 프로세스에 영향을 끼칠 수 있다.
  * 공유 자원에 대해 관리해야 한다.
  * 공유 자원으로 통신 비용이 절감되며 메모리가 효율적이다.
  * 컨텍스트 스위칭 비용이 적다.

<br>

## 5. Multi-Core

프로세스와 스레드는 S/W 측면의 처리 방식과 관련된 개념이라면, 코어는 하드웨어 스펙이다.

1. 싱글 코어
  * 짧은 순간 CPU의 시간을 분할해서 작업이 동시에 처리되는 것 처럼 동시성을 구현한다.
  * 하나의 코어에서 하나 이상의 프로세스 혹은 스레드가 번갈아 진행된다.
2. 멀티코어
  * 여러 물리적인 코어를 사용해서 다수의 실행 단위를 한순간에 처리하는 병렬성 특징이 있다.
  * 둘 이상의 코어에서 동시에 하나 이상의 프로세스 혹은 스레드가 한꺼번에 진행된다.

<br>

## 6. 기타

'리눅스 커널'은 프로세스와 스레드를 동일하게 본다. 스레드는 사용자 스레드와 커널 스레드로 나뉘는데, 이 두 스레드간의 연관 관계는 1:1 및 1:다 등 다양하다.

리눅스에서는 1:1 모델을 사용하며, 하나의 사용자 스레드당 하나의 커널 스레드를 매칭시킨다. 따라서 리눅스 커널 입장에서는 각 스레드가 하나의 프로세스가 된다. 아울러 리눅스에서는 프로세스는 메모리를 공유하는 Light Weight Process라고 하는데, 해당 부분의 특징을 추가적으로 학습해야겠다.

<br>

---

## References

* [[10분 테코톡] 🌷 코다의 Process vs Thread](https://www.youtube.com/watch?v=1grtWKqTn50)
